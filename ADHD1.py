# app.py
import streamlit as st
import pandas as pd
from datetime import datetime
import io

st.set_page_config(page_title="Parent ADHD Screening", layout="centered")

# --- Language selection ---
lang = st.sidebar.selectbox(
    "Select Language / ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç / ‡®≠‡®æ‡®∏‡®º‡®æ ‡®ö‡©Å‡®£‡©ã",
    ["English", "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä", "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä"]
)

# --- Translations ---
TEXTS = {
    "English": {
        "title": "ADHD Screening Questionnaire (Parent Version)",
        "instructions": "Please rate your child‚Äôs behavior over the past 6 months.",
        "inattention": "Inattention Symptoms",
        "hyper": "Hyperactivity & Impulsivity Symptoms",
        "results": "üìä Screening Results",
        "interpret": "Interpretation",
        "download": "üì• Download Responses",
        "score_label": "Total Score",
        "interpret_low": "Likely typical behavior (no ADHD symptoms).",
        "interpret_mid": "Some ADHD-like traits present. Monitoring recommended.",
        "interpret_high": "High number of ADHD symptoms. Clinical evaluation recommended.",
    },
    "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": {
        "title": "‡§è‡§°‡•Ä‡§è‡§ö‡§°‡•Ä ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§ø‡§Ç‡§ó ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡§æ‡§µ‡§≤‡•Ä (‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£)",
        "instructions": "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§ø‡§õ‡§≤‡•á 6 ‡§Æ‡§π‡•Ä‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•á ‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•á ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§ï‡•ã ‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§",
        "inattention": "‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§≤‡§ï‡•ç‡§∑‡§£",
        "hyper": "‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø‡§§‡§æ ‡§î‡§∞ ‡§Ü‡§µ‡•á‡§ó‡§∂‡•Ä‡§≤‡§§‡§æ ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£",
        "results": "üìä ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ",
        "interpret": "‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ",
        "download": "üì• ‡§â‡§§‡•ç‡§§‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
        "score_label": "‡§ï‡•Å‡§≤ ‡§∏‡•ç‡§ï‡•ã‡§∞",
        "interpret_low": "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ (‡§è‡§°‡•Ä‡§è‡§ö‡§°‡•Ä ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§π‡•Ä‡§Ç)‡•§",
        "interpret_mid": "‡§ï‡•Å‡§õ ‡§è‡§°‡•Ä‡§è‡§ö‡§°‡•Ä ‡§ú‡•à‡§∏‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡§Ç‡•§ ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§¶‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§",
        "interpret_high": "‡§è‡§°‡•Ä‡§è‡§ö‡§°‡•Ä ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à‡•§ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï‡§≤ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§",
    },
    "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": {
        "title": "ADHD ‡®∏‡®ï‡©ç‡®∞‡©Ä‡®®‡®ø‡©∞‡®ó ‡®™‡©ç‡®∞‡®∏‡®º‡®®‡®æ‡®µ‡®≤‡©Ä (‡®Æ‡®æ‡®™‡®ø‡®Ü‡®Ç ‡®≤‡®à)",
        "instructions": "‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®™‡®ø‡®õ‡®≤‡©á 6 ‡®Æ‡®π‡©Ä‡®®‡®ø‡®Ü‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®Ü‡®™‡®£‡©á ‡®¨‡©±‡®ö‡©á ‡®¶‡©á ‡®µ‡®ø‡®µ‡®π‡®æ‡®∞ ‡®®‡©Ç‡©∞ ‡®¶‡®∞‡®ú ‡®ï‡®∞‡©ã‡•§",
        "inattention": "‡®ß‡®ø‡®Ü‡®® ‡®¶‡©Ä ‡®ò‡®æ‡®ü ‡®¶‡©á ‡®≤‡©±‡®õ‡®£",
        "hyper": "‡®Ö‡®§‡®ø‡®Ö‡®ß‡®ø‡®ï ‡®∏‡®∞‡®ó‡®∞‡®Æ‡©Ä ‡®Ö‡®§‡©á ‡®ú‡®ú‡®º‡®¨‡®æ‡®§‡©Ä ‡®≤‡©±‡®õ‡®£",
        "results": "üìä ‡®®‡®§‡©Ä‡®ú‡©á",
        "interpret": "‡®µ‡®ø‡®Ü‡®ñ‡®ø‡®Ü",
        "download": "üì• ‡®ú‡®µ‡®æ‡®¨ ‡®°‡®æ‡®ä‡®®‡®≤‡©ã‡®° ‡®ï‡®∞‡©ã",
        "score_label": "‡®ï‡©Å‡©±‡®≤ ‡®∏‡®ï‡©ã‡®∞",
        "interpret_low": "‡®∏‡®ß‡®æ‡®∞‡®£ ‡®µ‡®ø‡®µ‡®π‡®æ‡®∞ (ADHD ‡®¶‡©á ‡®≤‡©±‡®õ‡®£ ‡®®‡®π‡©Ä‡®Ç)‡•§",
        "interpret_mid": "‡®ï‡©Å‡®ù ADHD ‡®µ‡®∞‡®ó‡©á ‡®≤‡©±‡®õ‡®£ ‡®Æ‡©å‡®ú‡©Ç‡®¶ ‡®π‡®®‡•§ ‡®®‡®ø‡®ó‡®∞‡®æ‡®®‡©Ä ‡®¶‡©Ä ‡®≤‡©ã‡©ú ‡®π‡©à‡•§",
        "interpret_high": "ADHD ‡®¶‡©á ‡®≤‡©±‡®õ‡®£ ‡®µ‡©±‡®ß ‡®π‡®®‡•§ ‡®ï‡®≤‡©Ä‡®®‡®ø‡®ï‡®≤ ‡®Æ‡©Å‡®≤‡®æ‡®Ç‡®ï‡®£ ‡®¶‡©Ä ‡®∏‡®ø‡®´‡®º‡®æ‡®∞‡®∏‡®º ‡®π‡©à‡•§",
    },
}

QUESTIONS = {
    "English": {
        "inattention": [
            "Makes careless mistakes or doesn‚Äôt pay close attention to details.",
            "Has trouble sustaining attention in tasks or play.",
            "Doesn‚Äôt seem to listen when spoken to directly.",
            "Doesn‚Äôt follow instructions or finish tasks.",
            "Has trouble organizing tasks and activities.",
            "Avoids or dislikes tasks requiring mental effort.",
            "Often loses things (books, pencils, toys).",
            "Easily distracted by outside stimuli.",
            "Forgetful in daily activities.",
        ],
        "hyper": [
            "Fidgets or squirms in seat.",
            "Leaves seat when expected to remain seated.",
            "Runs or climbs in inappropriate situations.",
            "Unable to play quietly.",
            "Acts as if 'driven by a motor'.",
            "Talks excessively.",
            "Blurts out answers before questions are finished.",
            "Has trouble waiting turn.",
            "Interrupts or intrudes on others.",
        ],
    },
    "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": {
        "inattention": [
            "‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π‡•Ä ‡§∏‡•á ‡§ó‡§≤‡§§‡§ø‡§Ø‡§æ‡§Å ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§Ø‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á‡§§‡§æ‡•§",
            "‡§ï‡§æ‡§Æ ‡§Ø‡§æ ‡§ñ‡•á‡§≤ ‡§Æ‡•á‡§Ç ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¨‡§®‡§æ‡§è ‡§∞‡§ñ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§",
            "‡§∏‡•Ä‡§ß‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§≠‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§∏‡•Å‡§®‡§§‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à‡•§",
            "‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ ‡§Ø‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§™‡•Ç‡§∞‡•á ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ‡•§",
            "‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§",
            "‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§µ‡§æ‡§≤‡•á ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§ö‡§§‡§æ ‡§π‡•à‡•§",
            "‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§ö‡•Ä‡§ú‡•á‡§Ç ‡§ñ‡•ã ‡§¶‡•á‡§§‡§æ ‡§π‡•à (‡§ï‡§ø‡§§‡§æ‡§¨‡•á‡§Ç, ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤, ‡§ñ‡§ø‡§≤‡•å‡§®‡•á)‡•§",
            "‡§¨‡§æ‡§π‡§∞‡•Ä ‡§ö‡•Ä‡§ú‡•ã‡§Ç ‡§∏‡•á ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§µ‡§ø‡§ö‡§≤‡§ø‡§§ ‡§π‡•ã ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§",
            "‡§¶‡•à‡§®‡§ø‡§ï ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≠‡•Ç‡§≤ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§",
        ],
        "hyper": [
            "‡§¨‡•à‡§†‡•á-‡§¨‡•à‡§†‡•á ‡§π‡§ø‡§≤‡§§‡§æ-‡§°‡•Å‡§≤‡§§‡§æ ‡§π‡•à‡•§",
            "‡§ú‡§¨ ‡§¨‡•à‡§†‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‡§§‡§¨ ‡§∏‡•Ä‡§ü ‡§õ‡•ã‡§°‡§º ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§",
            "‡§Ö‡§®‡•Å‡§ö‡§ø‡§§ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡•å‡§°‡§º‡§§‡§æ ‡§Ø‡§æ ‡§ö‡§¢‡§º‡§§‡§æ ‡§π‡•à‡•§",
            "‡§∂‡§æ‡§Ç‡§§‡§ø‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ñ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§∏‡§ï‡§§‡§æ‡•§",
            "‡§π‡§Æ‡•á‡§∂‡§æ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§∞‡§π‡§§‡§æ ‡§π‡•à ‡§ú‡•à‡§∏‡•á ‡§Æ‡•ã‡§ü‡§∞ ‡§ö‡§≤‡§æ ‡§∞‡§π‡•Ä ‡§π‡•ã‡•§",
            "‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§¨‡•ã‡§≤‡§§‡§æ ‡§π‡•à‡•§",
            "‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§∞‡§æ ‡§π‡•ã‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§",
            "‡§Ö‡§™‡§®‡•Ä ‡§¨‡§æ‡§∞‡•Ä ‡§ï‡§æ ‡§á‡§Ç‡§§‡§ú‡§æ‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§",
            "‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§ï‡§æ‡§ü ‡§¶‡•á‡§§‡§æ ‡§π‡•à ‡§Ø‡§æ ‡§¨‡•Ä‡§ö ‡§Æ‡•á‡§Ç ‡§ü‡•ã‡§ï‡§§‡§æ ‡§π‡•à‡•§",
        ],
    },
    "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": {
        "inattention": [
            "‡®≤‡®æ‡®™‡®∞‡®µ‡®æ‡®π‡©Ä ‡®®‡®æ‡®≤ ‡®ó‡®≤‡®§‡©Ä‡®Ü‡®Ç ‡®ï‡®∞‡®¶‡®æ ‡®π‡©à ‡®ú‡®æ‡®Ç ‡®µ‡©á‡®∞‡®µ‡®ø‡®Ü‡®Ç ‡®§‡©á ‡®ß‡®ø‡®Ü‡®® ‡®®‡®π‡©Ä‡®Ç ‡®¶‡®ø‡©∞‡®¶‡®æ‡•§",
            "‡®ï‡©∞‡®Æ ‡®ú‡®æ‡®Ç ‡®ñ‡©á‡®° ‡®µ‡®ø‡©±‡®ö ‡®ß‡®ø‡®Ü‡®® ‡®¨‡®£‡®æ‡®à ‡®∞‡©±‡®ñ‡®£ ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©Å‡®∏‡®º‡®ï‡®≤ ‡®π‡©Å‡©∞‡®¶‡©Ä ‡®π‡©à‡•§",
            "‡®∏‡®ø‡©±‡®ß‡®æ ‡®ó‡©±‡®≤ ‡®ï‡®∞‡®® '‡®§‡©á ‡®µ‡©Ä ‡®®‡®π‡©Ä‡®Ç ‡®∏‡©Å‡®£‡®¶‡®æ‡•§",
            "‡®®‡®ø‡®∞‡®¶‡©á‡®∏‡®º‡®æ‡®Ç ‡®¶‡©Ä ‡®™‡®æ‡®≤‡®£‡®æ ‡®®‡®π‡©Ä‡®Ç ‡®ï‡®∞‡®¶‡®æ ‡®ú‡®æ‡®Ç ‡®ï‡©∞‡®Æ ‡®™‡©Ç‡®∞‡®æ ‡®®‡®π‡©Ä‡®Ç ‡®ï‡®∞‡®¶‡®æ‡•§",
            "‡®ï‡©∞‡®Æ‡®æ‡®Ç ‡®Ö‡®§‡©á ‡®ó‡®§‡©Ä‡®µ‡®ø‡®ß‡©Ä‡®Ü‡®Ç ‡®®‡©Ç‡©∞ ‡®∏‡©Å‡®ß‡®æ‡®∞‡®® ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©Å‡®∏‡®º‡®ï‡®≤ ‡®π‡©Å‡©∞‡®¶‡©Ä ‡®π‡©à‡•§",
            "‡®Æ‡®æ‡®®‡®∏‡®ø‡®ï ‡®Ø‡®§‡®® ‡®µ‡®æ‡®≤‡©á ‡®ï‡©∞‡®Æ‡®æ‡®Ç ‡®§‡©ã‡®Ç ‡®¨‡®ö‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®Ö‡®ï‡®∏‡®∞ ‡®ö‡©Ä‡®ú‡®º‡®æ‡®Ç ‡®ó‡©Å‡®Ü ‡®≤‡©à‡®Ç‡®¶‡®æ ‡®π‡©à (‡®ï‡®ø‡®§‡®æ‡®¨‡®æ‡®Ç, ‡®™‡©à‡®®‡®∏‡®ø‡®≤‡®æ‡®Ç, ‡®ñ‡®ø‡®°‡©å‡®£‡©á)‡•§",
            "‡®¨‡®æ‡®π‡®∞‡©Ä ‡®ö‡©Ä‡®ú‡®º‡®æ‡®Ç ‡®®‡®æ‡®≤ ‡®Ö‡®∏‡®æ‡®®‡©Ä ‡®®‡®æ‡®≤ ‡®ß‡®ø‡®Ü‡®® ‡®≠‡©∞‡®ó ‡®ï‡®∞ ‡®≤‡©à‡®Ç‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®∞‡©ã‡®ú‡®º‡®æ‡®®‡®æ ‡®ï‡®æ‡®∞‡®ú‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®≠‡©Å‡©±‡®≤ ‡®ú‡®æ‡®Ç‡®¶‡®æ ‡®π‡©à‡•§",
        ],
        "hyper": [
            "‡®¨‡©à‡®†‡®ø‡®Ü‡®Ç ‡®π‡®ø‡®≤‡®¶‡®æ-‡®°‡©Å‡©±‡®≤‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®ú‡®¶‡©ã‡®Ç ‡®¨‡©à‡®†‡®£‡®æ ‡®ö‡®æ‡®π‡©Ä‡®¶‡®æ ‡®π‡©à ‡®â‡®∏ ‡®µ‡©á‡®≤‡©á ‡®∏‡©Ä‡®ü ‡®õ‡©±‡®° ‡®¶‡®ø‡©∞‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®ó‡®≤‡®§ ‡®∏‡®Æ‡©á‡®Ç ‡®¶‡©å‡©ú‡®¶‡®æ ‡®ú‡®æ‡®Ç ‡®ö‡©ú‡©ç‡®π‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®∏‡®º‡®æ‡®Ç‡®§‡©Ä ‡®®‡®æ‡®≤ ‡®ñ‡©á‡®° ‡®®‡®π‡©Ä‡®Ç ‡®∏‡®ï‡®¶‡®æ‡•§",
            "‡®π‡®Æ‡©á‡®∏‡®º‡®æ‡®Ç ‡®∏‡®∞‡®ó‡®∞‡®Æ ‡®∞‡®π‡®ø‡©∞‡®¶‡®æ ‡®π‡©à ‡®ú‡®ø‡®µ‡©á‡®Ç ‡®Æ‡©ã‡®ü‡®∞ ‡®ö‡®≤‡®æ ‡®∞‡®π‡©Ä ‡®π‡©ã‡®µ‡©á‡•§",
            "‡®¨‡®π‡©Å‡®§ ‡®ú‡®º‡®ø‡®Ü‡®¶‡®æ ‡®¨‡©ã‡®≤‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®™‡©ç‡®∞‡®∏‡®º‡®® ‡®™‡©Ç‡®∞‡®æ ‡®π‡©ã‡®£ ‡®§‡©ã‡®Ç ‡®™‡®π‡®ø‡®≤‡®æ‡®Ç ‡®π‡©Ä ‡®ú‡®µ‡®æ‡®¨ ‡®¶‡©á ‡®¶‡®ø‡©∞‡®¶‡®æ ‡®π‡©à‡•§",
            "‡®Ü‡®™‡®£‡©Ä ‡®µ‡®æ‡®∞‡©Ä ‡®¶‡©Ä ‡®â‡®°‡©Ä‡®ï ‡®ï‡®∞‡®® ‡®µ‡®ø‡©±‡®ö ‡®Æ‡©Å‡®∏‡®º‡®ï‡®≤ ‡®π‡©Å‡©∞‡®¶‡©Ä ‡®π‡©à‡•§",
            "‡®π‡©ã‡®∞‡®æ‡®Ç ‡®¶‡©Ä ‡®ó‡©±‡®≤ ‡®µ‡®ø‡®ö‡®ï‡®æ‡®∞ ‡®ï‡©±‡®ü ‡®¶‡®ø‡©∞‡®¶‡®æ ‡®π‡©à‡•§",
        ],
    },
}

# --- Scale labels ---
scale_options = {
    0: {"English": "0 ‚Äî Never or Rarely", "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": "0 ‚Äî ‡§ï‡§≠‡•Ä ‡§®‡§π‡•Ä‡§Ç / ‡§¨‡§π‡•Å‡§§ ‡§ï‡§Æ", "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": "0 ‚Äî ‡®ï‡®¶‡©á ‡®®‡®π‡©Ä‡®Ç / ‡®¨‡®π‡©Å‡®§ ‡®ò‡©±‡®ü"},
    1: {"English": "1 ‚Äî Sometimes", "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": "1 ‚Äî ‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä", "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": "1 ‚Äî ‡®ï‡®¶‡©á-‡®ï‡®¶‡©á"},
    2: {"English": "2 ‚Äî Often", "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": "2 ‚Äî ‡§Ö‡§ï‡•ç‡§∏‡§∞", "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": "2 ‚Äî ‡®Ö‡®ï‡®∏‡®∞"},
    3: {"English": "3 ‚Äî Very Often", "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä": "3 ‚Äî ‡§¨‡§π‡•Å‡§§ ‡§¨‡§æ‡§∞", "‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä": "3 ‚Äî ‡®¨‡®π‡©Å‡®§ ‡®µ‡®æ‡®∞"},
}

# --- UI ---
st.title(TEXTS[lang]["title"])
st.write(TEXTS[lang]["instructions"])

responses = {}

# Inattention
st.subheader(TEXTS[lang]["inattention"])
for i, q in enumerate(QUESTIONS[lang]["inattention"], 1):
    responses[f"Inattention {i}"] = st.radio(
        q, [scale_options[x][lang] for x in range(4)], horizontal=True, key=f"inatt_{i}"
    )

# Hyperactivity/Impulsivity
st.subheader(TEXTS[lang]["hyper"])
for i, q in enumerate(QUESTIONS[lang]["hyper"], 1):
    responses[f"Hyperactivity {i}"] = st.radio(
        q, [scale_options[x][lang] for x in range(4)], horizontal=True, key=f"hyper_{i}"
    )

# Submit
if st.button("Submit / ‡§∏‡§¨‡§Æ‡§ø‡§ü / ‡®ú‡®Æ‡©ç‡®π‡®æ‡®Ç ‡®ï‡®∞‡©ã"):
    # convert responses to numeric
    scores = []
    for ans in responses.values():
        for k, v in scale_options.items():
            if v[lang] == ans:
                scores.append(k)
    total_score = sum(scores)

    st.subheader(TEXTS[lang]["results"])
    st.metric(TEXTS[lang]["score_label"], total_score)

    st.subheader(TEXTS[lang]["interpret"])
    if total_score <= 12:
        st.success(TEXTS[lang]["interpret_low"])
    elif total_score <= 24:
        st.warning(TEXTS[lang]["interpret_mid"])
    else:
        st.error(TEXTS[lang]["interpret_high"])

    # Save to CSV
    df = pd.DataFrame([responses])
    df["Total Score"] = total_score
    df["Date"] = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    csv_buffer = io.StringIO()
    df.to_csv(csv_buffer, index=False)
    st.download_button(
        label=TEXTS[lang]["download"],
        data=csv_buffer.getvalue(),
        file_name="adhd_screening.csv",
        mime="text/csv",
    )
